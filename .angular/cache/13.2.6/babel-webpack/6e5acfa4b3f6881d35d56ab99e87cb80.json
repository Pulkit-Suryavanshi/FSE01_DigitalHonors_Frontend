{"ast":null,"code":"import { ReplyService } from './reply-list/reply/reply.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./reply-list/reply/reply.service\";\nimport * as i2 from \"./tweet.service\";\nimport * as i3 from \"../../profile.service\";\nimport * as i4 from \"src/app/login.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"./reply-list/reply-form/reply-form.component\";\nimport * as i8 from \"./reply-list/reply-list.component\";\n\nconst _c0 = function (a1) {\n  return [\"/tweet\", a1, \"edit\"];\n};\n\nfunction TweetComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"a\", 14);\n    i0.ɵɵtext(2, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"a\", 15);\n    i0.ɵɵlistener(\"click\", function TweetComponent_div_7_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.deleteTweet(ctx_r3.tweet);\n    });\n    i0.ɵɵtext(4, \"Delete\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(1, _c0, ctx_r0.tweet == null ? null : ctx_r0.tweet[\"id\"]));\n  }\n}\n\nfunction TweetComponent_reply_form_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"reply-form\", 16);\n    i0.ɵɵlistener(\"replyAdded\", function TweetComponent_reply_form_16_Template_reply_form_replyAdded_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return ctx_r5.onReplyAdded();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"tweetId\", ctx_r1.tweet == null ? null : ctx_r1.tweet[\"id\"]);\n  }\n}\n\nfunction TweetComponent_reply_list_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"reply-list\", 17);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"tweetId\", ctx_r2.tweet == null ? null : ctx_r2.tweet[\"id\"])(\"replies\", ctx_r2.replies);\n  }\n}\n\nconst _c1 = function (a1) {\n  return [\"/profile\", a1];\n};\n\nexport let TweetComponent = /*#__PURE__*/(() => {\n  class TweetComponent {\n    constructor(replyService, tweetService, profileService, loginService) {\n      this.replyService = replyService;\n      this.tweetService = tweetService;\n      this.profileService = profileService;\n      this.loginService = loginService;\n      this.tweet = {};\n      this.showReplyForm = false;\n      this.showAllReplies = false;\n      this.authUser = {};\n      this.replies = [];\n    }\n\n    ngOnInit() {\n      this.replyService.replies.subscribe(replyList => {\n        this.replies = replyList;\n      });\n      this.authUser = this.loginService.loggedInUser.getValue();\n    }\n\n    likeTweet() {\n      this.tweetService.likeTweet(this.tweet).subscribe(response => {\n        if (!(response === null || response === void 0 ? void 0 : response['error'])) {\n          this.tweet['likes'] += 1;\n        }\n      });\n    }\n\n    onReplyAdded() {\n      this.showAllReplies = true;\n    }\n\n    loadReplies() {\n      this.showAllReplies = !this.showAllReplies;\n\n      if (this.showAllReplies) {\n        this.tweetService.getTweetReplies(this.tweet).subscribe(response => {\n          this.replyService.replies.next(response);\n        });\n      }\n    }\n\n    deleteTweet(tweetId) {\n      this.tweetService.deleteTweet(tweetId).subscribe(response => {\n        var _a;\n\n        if (!(response === null || response === void 0 ? void 0 : response['error'])) {\n          this.tweetService.getTweetsByUsername((_a = this.tweet) === null || _a === void 0 ? void 0 : _a['createdBy']).subscribe(tweetList => {\n            this.profileService.tweets.next(tweetList);\n          });\n        }\n      });\n    }\n\n  }\n\n  TweetComponent.ɵfac = function TweetComponent_Factory(t) {\n    return new (t || TweetComponent)(i0.ɵɵdirectiveInject(i1.ReplyService), i0.ɵɵdirectiveInject(i2.TweetService), i0.ɵɵdirectiveInject(i3.ProfileService), i0.ɵɵdirectiveInject(i4.LoginService));\n  };\n\n  TweetComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TweetComponent,\n    selectors: [[\"tweet\"]],\n    inputs: {\n      tweet: \"tweet\"\n    },\n    features: [i0.ɵɵProvidersFeature([ReplyService])],\n    decls: 21,\n    vars: 11,\n    consts: [[1, \"tweet\"], [1, \"tweet-header\"], [1, \"published-by\"], [1, \"arrow-right\"], [3, \"routerLink\"], [4, \"ngIf\"], [1, \"content\"], [1, \"likes\"], [1, \"like\", 3, \"click\"], [1, \"reply\", 3, \"click\"], [3, \"tweetId\", \"replyAdded\", 4, \"ngIf\"], [1, \"show-replies\", 3, \"click\"], [3, \"ngClass\"], [3, \"tweetId\", \"replies\", 4, \"ngIf\"], [1, \"btn\", \"btn-primary\", \"text-accent\", \"edit-btn\", 3, \"routerLink\"], [1, \"btn\", \"btn-primary\", \"text-accent\", \"edit-btn\", 3, \"click\"], [3, \"tweetId\", \"replyAdded\"], [3, \"tweetId\", \"replies\"]],\n    template: function TweetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"p\", 2);\n        i0.ɵɵtext(3, \" Tweeted by \");\n        i0.ɵɵelement(4, \"i\", 3);\n        i0.ɵɵelementStart(5, \"a\", 4);\n        i0.ɵɵtext(6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(7, TweetComponent_div_7_Template, 5, 3, \"div\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"h3\", 6);\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"label\", 7);\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"a\", 8);\n        i0.ɵɵlistener(\"click\", function TweetComponent_Template_a_click_12_listener() {\n          return ctx.likeTweet();\n        });\n        i0.ɵɵtext(13, \"Like\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"a\", 9);\n        i0.ɵɵlistener(\"click\", function TweetComponent_Template_a_click_14_listener() {\n          return ctx.showReplyForm = !ctx.showReplyForm;\n        });\n        i0.ɵɵtext(15, \"Reply\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, TweetComponent_reply_form_16_Template, 1, 1, \"reply-form\", 10);\n        i0.ɵɵelementStart(17, \"a\", 11);\n        i0.ɵɵlistener(\"click\", function TweetComponent_Template_a_click_17_listener() {\n          return ctx.loadReplies();\n        });\n        i0.ɵɵtext(18);\n        i0.ɵɵelement(19, \"i\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, TweetComponent_reply_list_20_Template, 1, 2, \"reply-list\", 13);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(9, _c1, ctx.tweet == null ? null : ctx.tweet[\"createdBy\"]));\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate(ctx.tweet == null ? null : ctx.tweet[\"createdBy\"]);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.authUser == null ? null : ctx.authUser[\"username\"]) == (ctx.tweet == null ? null : ctx.tweet[\"createdBy\"]));\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(ctx.tweet == null ? null : ctx.tweet[\"content\"]);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Likes - \", ctx.tweet == null ? null : ctx.tweet[\"likes\"], \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", ctx.showReplyForm);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", !ctx.showAllReplies ? \"Show replies to this post\" : \"Hide replies\", \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", !ctx.showAllReplies ? \"arrow-bottom\" : \"arrow-top\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showAllReplies);\n      }\n    },\n    directives: [i5.RouterLinkWithHref, i6.NgIf, i7.ReplyFormComponent, i6.NgClass, i8.ReplyListComponent],\n    styles: [\".tweet[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:auto 5rem auto 2rem auto;border:1px solid var(--clr-form-control-border);border-radius:.5rem;width:40vw;margin:1rem auto;overflow:hidden}.tweet-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.edit-btn[_ngcontent-%COMP%]{font-size:.8rem;text-decoration:none;padding:.2rem;height:max-content;margin:0 .3rem}.tweet-header[_ngcontent-%COMP%], .content[_ngcontent-%COMP%], .likes[_ngcontent-%COMP%]{grid-column:1 / 3;border-bottom:1px solid var(--clr-form-control-border);padding:.3rem}.like[_ngcontent-%COMP%], .reply[_ngcontent-%COMP%], .show-replies[_ngcontent-%COMP%]{text-align:center;text-decoration:none;align-self:center;color:var(--clr-primary);font-weight:700;cursor:pointer}.like[_ngcontent-%COMP%]{border-right:1px solid var(--clr-form-control-border)}reply-form[_ngcontent-%COMP%], .show-replies[_ngcontent-%COMP%], reply-list[_ngcontent-%COMP%]{border-top:1px solid var(--clr-form-control-border);grid-column:1 / 3}\"]\n  });\n  return TweetComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}